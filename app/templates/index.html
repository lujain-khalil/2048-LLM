<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2048 LLM Demo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="main-wrapper">
        <div id="top-container">
            <div id="title-container"></div>
            
            <!-- Score + Speed -->
            <div id="score-block">
                <div id="score-container">
                    <div class="label">SCORE</div>
                    <div id="score">{{ score }}</div>
                </div>
                <select id="speed-select">
                    <option value="slow">Slow</option>
                    <option value="normal" selected>Normal</option>
                    <option value="fast">Fast</option>
                </select>
            </div>
            
            <!-- Last Move + Agent -->
            <div id="move-block">
                <div id="last-move-container">
                    <div class="label">LAST MOVE</div>
                    <div id="move">{{ move }}</div>
                </div>
                <select id="agent-select">
                    <option value="random" selected>Random</option>
                    <option value="loop">Loop</option>
                </select>
            </div>
        </div>


        <div id="subheader-controls">

            <div id="subheader">Watch AI get to the 2048 tile!</div>

            <div id="control-bar">
                <div id="play-controls">
                    <button id="pause-btn" title="Pause">&#10073;&#10073;</button>
                    <button id="resume-btn" title="Resume">&#9658;</button>
                    <button id="restart-btn" title="Restart">&#x21BB;</button>
                </div>
            </div>
        </div>
        <div id="grid-container"></div>
    </div>

    <script id="initial-grid" type="application/json">
        {{ grid | tojson | safe }}
    </script>
    <script>
        try {
            window.initialGrid = JSON.parse(document.getElementById("initial-grid").textContent.trim());
        } catch (e) {
            console.error("Error parsing initial grid JSON:", e);
            window.initialGrid = null;
        }
    </script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>
